{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\freeb\\\\OneDrive\\\\Desktop\\\\devCodeCamp\\\\YouTubeCloneProject\\\\YouTubeClone\\\\src\\\\components\\\\Comments\\\\Comments.jsx\";\nimport React, { Component } from 'react';\nimport axios from 'axios';\nimport CommentsDisplay from '../CommentsDisplay/CommentsDisplay';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass Comments extends Component {\n  constructor(props) {\n    super(props);\n\n    this.handleChange = event => {\n      this.setState({\n        comment: event.target.value\n      });\n    };\n\n    this.getComments = async () => {\n      let response = await axios.get('http://127.0.0.1:8000/comments/');\n      let comments = response.data;\n      let filteredComments = [];\n      comments.forEach(comment => {\n        if (comment.videoId === this.props.videoId) {\n          filteredComments.push(comment);\n        }\n      });\n      this.setState({\n        videoId: this.props.videoId,\n        comments: filteredComments\n      });\n    };\n\n    this.handleSubmit = async event => {\n      event.preventDefault();\n      let comment = {\n        videoId: this.props.videoId,\n        likes: 0,\n        dislikes: 0,\n        comment: this.state.comment\n      };\n      this.setState({\n        comments: [...this.state.comments, comment]\n      });\n      await axios.post(\"http://127.0.0.1:8000/comments/\", comment);\n    };\n\n    this.increment = async (id, name) => {\n      let newArr = this.state.comments;\n      let value;\n      newArr.forEach(comment => {\n        if (comment.id === id) {\n          comment[name] += 1;\n          value = comment[name];\n        }\n      });\n      this.setState({\n        comments: newArr\n      });\n      await axios.patch(`http://127.0.0.1:8000/comments/${id}/`, {\n        [name]: value\n      });\n    };\n\n    this.state = {\n      comments: [],\n      videoId: '',\n      comment: ''\n    };\n  }\n\n  componentDidMount() {\n    this.getComments();\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: this.handleSubmit,\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          name: \"comment\",\n          onChange: this.handleChange,\n          value: this.state.comment\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          children: \"Post Comment\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(CommentsDisplay, {\n          comments: this.props.comments,\n          videoId: this.props.videoId\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 17\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 9\n    }, this);\n  }\n\n}\n\nexport default Comments;","map":{"version":3,"sources":["C:/Users/freeb/OneDrive/Desktop/devCodeCamp/YouTubeCloneProject/YouTubeClone/src/components/Comments/Comments.jsx"],"names":["React","Component","axios","CommentsDisplay","Comments","constructor","props","handleChange","event","setState","comment","target","value","getComments","response","get","comments","data","filteredComments","forEach","videoId","push","handleSubmit","preventDefault","likes","dislikes","state","post","increment","id","name","newArr","patch","componentDidMount","render"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\r\nimport axios from 'axios';\r\nimport CommentsDisplay from '../CommentsDisplay/CommentsDisplay';\r\n\r\n\r\n\r\nclass Comments extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = { \r\n            comments: [],\r\n            videoId: '',\r\n            comment: ''\r\n        }\r\n    }\r\n\r\n    componentDidMount(){\r\n        this.getComments()\r\n    }\r\n\r\n    handleChange = (event) => {\r\n        this.setState({\r\n            comment: event.target.value\r\n        })\r\n    }\r\n\r\n    getComments = async() => {\r\n        let response = await axios.get('http://127.0.0.1:8000/comments/')\r\n        let comments = response.data\r\n        let filteredComments = []\r\n        comments.forEach(comment => {\r\n            if(comment.videoId === this.props.videoId) {\r\n                filteredComments.push(comment)\r\n            }\r\n        })\r\n        this.setState({\r\n            videoId: this.props.videoId,\r\n            comments: filteredComments\r\n        })\r\n    }\r\n\r\n    handleSubmit = async(event) => {\r\n        event.preventDefault()\r\n        let comment = {\r\n            videoId: this.props.videoId,\r\n            likes: 0,\r\n            dislikes: 0,\r\n            comment: this.state.comment\r\n        }\r\n        this.setState({\r\n            comments: [...this.state.comments, comment]\r\n        })\r\n        await axios.post(\"http://127.0.0.1:8000/comments/\", comment)\r\n    }\r\n\r\n    increment = async(id, name) => {\r\n        let newArr = this.state.comments\r\n        let value;\r\n        newArr.forEach(comment => {\r\n            if(comment.id === id) {\r\n                comment[name] += 1\r\n                value = comment[name]\r\n            }\r\n        })\r\n        this.setState({\r\n            comments: newArr\r\n        })\r\n    await axios.patch(`http://127.0.0.1:8000/comments/${id}/`, { [name]: value })\r\n }\r\n\r\n render() { \r\n    return (\r\n        <div>\r\n            <form onSubmit={this.handleSubmit}>\r\n                <input name=\"comment\" onChange={this.handleChange} value={this.state.comment}></input>\r\n                <button type=\"submit\">Post Comment</button>\r\n            </form>\r\n            <div>\r\n                <CommentsDisplay comments={this.props.comments} videoId={this.props.videoId}/>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n}\r\n\r\n\r\nexport default Comments;\r\n"]},"metadata":{},"sourceType":"module"}